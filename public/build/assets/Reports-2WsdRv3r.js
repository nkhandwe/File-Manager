import{r as l,j as e,L as R,$ as i}from"./app-D8uQYgvl.js";import{A as S,D as A}from"./app-layout-B5_O5D4_.js";import{C as b,F,A as D}from"./users-UtEP8ujb.js";import{C as j}from"./circle-check-big-DEcvGDMg.js";import{C as $}from"./clock-n0ESeOyk.js";import{T as p}from"./triangle-alert-DZjag7vf.js";import{F as L}from"./filter-BcLyhxPC.js";import{c as N}from"./createLucideIcon-Dygev6kt.js";import{T as O}from"./trending-up-CHPkElrk.js";import{M as T}from"./map-pin-CGhK5NTk.js";import"./app-BHZg9BJg.js";import"./shield-Q_hQjvIf.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],E=N("ChartLine",P);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],H=N("Star",I),J=[{title:"Admin Dashboard",href:"/admin/dashboard"},{title:"Reports & Analytics"}];function ee({stats:r,monthlyTrends:g,regionalData:h,performanceMetrics:a,recentActivity:n,statusByRegion:M}){const[x,f]=l.useState(""),[c,v]=l.useState(""),[o,k]=l.useState(""),[m,w]=l.useState(""),[y,u]=l.useState(!1),_=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],C=async()=>{u(!0);const t=new URLSearchParams;x&&t.append("status",x),c&&t.append("region",c),o&&t.append("date_from",o),m&&t.append("date_to",m);try{window.location.href=`/admin/reports/export?${t.toString()}`}catch(s){console.error("Export error:",s)}finally{setTimeout(()=>u(!1),2e3)}},d=(t,s="good")=>s==="good"?t>=80?"text-green-600":t>=60?"text-yellow-600":"text-red-600":t<=10?"text-green-600":t<=25?"text-yellow-600":"text-red-600";return e.jsxs(S,{breadcrumbs:J,children:[e.jsx(R,{title:"Reports & Analytics"}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reports & Analytics"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Comprehensive insights and performance metrics for DC installations"})]}),e.jsx("div",{className:"flex space-x-3",children:e.jsxs(i,{href:"/admin/analytics",className:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),"Advanced Analytics"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx("div",{className:"rounded-lg bg-white p-6 shadow dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(F,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Installations"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.total})]})]})}),e.jsx("div",{className:"rounded-lg bg-white p-6 shadow dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(j,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Completed"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.completed}),e.jsxs("p",{className:`text-sm ${d(a.completion_rate)}`,children:[a.completion_rate,"% completion rate"]})]})]})}),e.jsx("div",{className:"rounded-lg bg-white p-6 shadow dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx($,{className:"h-8 w-8 text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.pending})]})]})}),e.jsx("div",{className:"rounded-lg bg-white p-6 shadow dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(p,{className:"h-8 w-8 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.overdue}),e.jsxs("p",{className:`text-sm ${d(a.overdue_rate,"bad")}`,children:[a.overdue_rate,"% overdue rate"]})]})]})})]}),e.jsxs("div",{className:"rounded-lg bg-white p-6 shadow dark:bg-gray-800",children:[e.jsxs("h3",{className:"mb-4 flex items-center text-lg font-semibold text-gray-900 dark:text-white",children:[e.jsx(L,{className:"mr-2 h-5 w-5 text-blue-600 dark:text-blue-400"}),"Export Filters"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),e.jsxs("select",{value:x,onChange:t=>f(t.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"overdue",children:"Overdue"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Region"}),e.jsxs("select",{value:c,onChange:t=>v(t.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Regions"}),h.map(t=>e.jsx("option",{value:t.region_division,children:t.region_division},t.region_division))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"From Date"}),e.jsx("input",{type:"date",value:o,onChange:t=>k(t.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"To Date"}),e.jsx("input",{type:"date",value:m,onChange:t=>w(t.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-white"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:C,disabled:y,className:"inline-flex w-full items-center justify-center rounded-lg bg-green-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-green-700 disabled:opacity-50",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Export CSV"]})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg bg-white p-6 shadow dark:bg-gray-800",children:[e.jsxs("h3",{className:"mb-4 flex items-center text-lg font-semibold text-gray-900 dark:text-white",children:[e.jsx(E,{className:"mr-2 h-5 w-5 text-blue-600 dark:text-blue-400"}),"Monthly Installation Trends (",new Date().getFullYear(),")"]}),e.jsx("div",{className:"space-y-3",children:Object.entries(g).map(([t,s])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:_[parseInt(t)-1]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-2 w-32 rounded-full bg-gray-200 dark:bg-gray-700",children:e.jsx("div",{className:"h-2 rounded-full bg-blue-600",style:{width:`${Math.max(s/Math.max(...Object.values(g))*100,5)}%`}})}),e.jsx("span",{className:"w-8 text-right text-sm font-medium text-gray-900 dark:text-white",children:s})]})]},t))})]}),e.jsxs("div",{className:"rounded-lg bg-white p-6 shadow dark:bg-gray-800",children:[e.jsxs("h3",{className:"mb-4 flex items-center text-lg font-semibold text-gray-900 dark:text-white",children:[e.jsx(O,{className:"mr-2 h-5 w-5 text-green-600 dark:text-green-400"}),"Performance Metrics"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completion Rate"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-2 w-32 rounded-full bg-gray-200 dark:bg-gray-700",children:e.jsx("div",{className:"h-2 rounded-full bg-green-600",style:{width:`${a.completion_rate}%`}})}),e.jsxs("span",{className:`text-sm font-medium ${d(a.completion_rate)}`,children:[a.completion_rate,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overdue Rate"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-2 w-32 rounded-full bg-gray-200 dark:bg-gray-700",children:e.jsx("div",{className:"h-2 rounded-full bg-red-600",style:{width:`${Math.max(a.overdue_rate,5)}%`}})}),e.jsxs("span",{className:`text-sm font-medium ${d(a.overdue_rate,"bad")}`,children:[a.overdue_rate,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"High Priority Rate"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-2 w-32 rounded-full bg-gray-200 dark:bg-gray-700",children:e.jsx("div",{className:"h-2 rounded-full bg-orange-600",style:{width:`${Math.max(a.high_priority_rate,5)}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-orange-600",children:[a.high_priority_rate,"%"]})]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg bg-white shadow dark:bg-gray-800",children:[e.jsx("div",{className:"border-b border-gray-200 p-6 dark:border-gray-700",children:e.jsxs("h3",{className:"flex items-center text-lg font-semibold text-gray-900 dark:text-white",children:[e.jsx(T,{className:"mr-2 h-5 w-5 text-purple-600 dark:text-purple-400"}),"Regional Distribution & Performance"]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"pb-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400",children:"Region"}),e.jsx("th",{className:"pb-3 text-right text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("th",{className:"pb-3 text-right text-sm font-medium text-gray-500 dark:text-gray-400",children:"Completed"}),e.jsx("th",{className:"pb-3 text-right text-sm font-medium text-gray-500 dark:text-gray-400",children:"Rate"}),e.jsx("th",{className:"pb-3 text-right text-sm font-medium text-gray-500 dark:text-gray-400",children:"Progress"})]})}),e.jsx("tbody",{className:"space-y-2",children:h.map(t=>{const s=t.total>0?t.completed/t.total*100:0;return e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[e.jsx("td",{className:"py-3 text-sm font-medium text-gray-900 dark:text-white",children:t.region_division}),e.jsx("td",{className:"py-3 text-right text-sm text-gray-600 dark:text-gray-400",children:t.total}),e.jsx("td",{className:"py-3 text-right text-sm text-gray-600 dark:text-gray-400",children:t.completed}),e.jsx("td",{className:"py-3 text-right text-sm",children:e.jsxs("span",{className:d(s),children:[s.toFixed(1),"%"]})}),e.jsx("td",{className:"py-3 text-right",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"h-2 w-20 rounded-full bg-gray-200 dark:bg-gray-700",children:e.jsx("div",{className:"h-2 rounded-full bg-blue-600",style:{width:`${s}%`}})})})})]},t.region_division)})})]})})})]}),e.jsxs("div",{className:"rounded-lg bg-white p-6 shadow dark:bg-gray-800",children:[e.jsxs("h3",{className:"mb-4 flex items-center text-lg font-semibold text-gray-900 dark:text-white",children:[e.jsx(D,{className:"mr-2 h-5 w-5 text-indigo-600 dark:text-indigo-400"}),"Recent Activity (Last 30 Days)"]}),e.jsxs("div",{className:"space-y-2",children:[Object.entries(n).slice(-10).map(([t,s])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(t).toLocaleDateString()}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-1 w-16 rounded-full bg-gray-200 dark:bg-gray-700",children:e.jsx("div",{className:"h-1 rounded-full bg-indigo-600",style:{width:`${Math.max(s/Math.max(...Object.values(n))*100,10)}%`}})}),e.jsx("span",{className:"w-6 text-right text-sm font-medium text-gray-900 dark:text-white",children:s})]})]},t)),Object.keys(n).length===0&&e.jsx("p",{className:"py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No recent activity data available"})]})]}),e.jsxs("div",{className:"rounded-lg bg-white p-6 shadow dark:bg-gray-800",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold text-gray-900 dark:text-white",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4",children:[e.jsxs(i,{href:"/admin/installations?status=overdue",className:"flex items-center rounded-lg border border-gray-200 p-4 transition-colors hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-700",children:[e.jsx(p,{className:"mr-3 h-8 w-8 text-red-600 dark:text-red-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"View Overdue"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.overdue," items"]})]})]}),e.jsxs(i,{href:"/admin/installations?priority=High",className:"flex items-center rounded-lg border border-gray-200 p-4 transition-colors hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-700",children:[e.jsx(H,{className:"mr-3 h-8 w-8 text-orange-600 dark:text-orange-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"High Priority"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.high_priority," items"]})]})]}),e.jsxs(i,{href:"/admin/installations?status=completed",className:"flex items-center rounded-lg border border-gray-200 p-4 transition-colors hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-700",children:[e.jsx(j,{className:"mr-3 h-8 w-8 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Completed"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.completed," items"]})]})]}),e.jsxs(i,{href:"/admin/dashboard",className:"flex items-center rounded-lg border border-gray-200 p-4 transition-colors hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-700",children:[e.jsx(b,{className:"mr-3 h-8 w-8 text-blue-600 dark:text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Overview"})]})]})]})]})]})]})}export{ee as default};
