import{r as n,j as e,L,$ as i,S as x}from"./app-D8uQYgvl.js";import{A as D,D as T}from"./app-layout-B5_O5D4_.js";import{T as y}from"./trash-2-ClrFe1dn.js";import{c as R}from"./createLucideIcon-Dygev6kt.js";import{S as E}from"./search-Cbj0fXO4.js";import{F as M}from"./filter-BcLyhxPC.js";import{E as F}from"./eye-B5UCNg4s.js";import{S as O}from"./square-pen-Ck7FCOeq.js";import{S as H}from"./share-BXcArDrM.js";import{P as U}from"./users-UtEP8ujb.js";import"./app-BHZg9BJg.js";import"./shield-Q_hQjvIf.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],b=R("Plus",q),B=[{title:"Admin Dashboard",href:"/admin/dashboard"},{title:"Installations"}];function se({installations:r,regions:j,districts:G,filters:s}){const[g,k]=n.useState(s.search||""),[o,f]=n.useState(s.status||"all"),[h,w]=n.useState(s.region||""),[v,K]=n.useState(s.district||""),[m,N]=n.useState(s.priority||""),[d,c]=n.useState([]),u=t=>{switch(t){case"Installed":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"Delivered":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"In Transit":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},S=t=>{switch(t){case"High":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"Medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"Low":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}},p=()=>{x.get("/admin/installations",{search:g,status:o!=="all"?o:void 0,region:h||void 0,district:v||void 0,priority:m||void 0})},_=t=>{confirm("Are you sure you want to delete this installation?")&&x.delete(`/admin/installations/${t}`)},P=()=>{if(d.length===0){alert("Please select items to delete");return}confirm(`Are you sure you want to delete ${d.length} installations?`)&&(d.forEach(t=>{x.delete(`/admin/installations/${t}`)}),c([]))},$=async t=>{var l;try{const a=await fetch(`/dc-installations/${t.id}/share`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""}});if(a.ok){const A=await a.json();navigator.clipboard.writeText(A.shareable_url),alert("Shareable link copied to clipboard!")}}catch(a){console.error("Error generating shareable link:",a),alert("Failed to generate shareable link")}},C=()=>{d.length===r.data.length?c([]):c(r.data.map(t=>t.id))},I=t=>{c(l=>l.includes(t)?l.filter(a=>a!==t):[...l,t])};return e.jsxs(D,{breadcrumbs:B,children:[e.jsx(L,{title:"Manage Installations"}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Manage Installations"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Total: ",r.total," installations"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[d.length>0&&e.jsxs("button",{onClick:P,className:"inline-flex items-center rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Delete Selected (",d.length,")"]}),e.jsxs(i,{href:"/admin/installations/create",className:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),"New Installation"]})]})]}),e.jsx("div",{className:"rounded-lg bg-white p-6 shadow dark:bg-gray-800",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:g,onChange:t=>k(t.target.value),onKeyPress:t=>t.key==="Enter"&&p(),className:"w-full rounded-lg border border-gray-300 bg-white py-2 pr-4 pl-10 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",placeholder:"Search by SR No, name, location..."}),e.jsx(E,{className:"absolute top-2.5 left-3 h-4 w-4 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),e.jsxs("select",{value:o,onChange:t=>f(t.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"overdue",children:"Overdue"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Region"}),e.jsxs("select",{value:h,onChange:t=>w(t.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Regions"}),j.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Priority"}),e.jsxs("select",{value:m,onChange:t=>N(t.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"High",children:"High"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Low",children:"Low"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:p,className:"inline-flex w-full items-center justify-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Filter"]})})]})}),e.jsxs("div",{className:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:d.length===r.data.length&&r.data.length>0,onChange:C,className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-300",children:"Installation"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-300",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-300",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-300",children:"Progress"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-300",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase dark:text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-800",children:r.data.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:d.includes(t.id),onChange:()=>I(t.id),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[t.district,", ",t.tahsil]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.region_division}),e.jsx("div",{className:"max-w-xs truncate text-xs text-gray-400 dark:text-gray-500",children:t.location_address})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${u(t.delivery_status)}`,children:t.delivery_status}),e.jsx("br",{}),e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${u(t.installation_status)}`,children:t.installation_status})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"mr-2 text-sm font-medium text-gray-900 dark:text-white",children:[t.completion_percentage,"%"]}),e.jsx("div",{className:"h-2 w-16 rounded-full bg-gray-200 dark:bg-gray-700",children:e.jsx("div",{className:"h-2 rounded-full bg-blue-600 transition-all duration-300",style:{width:`${t.completion_percentage}%`}})})]}),t.assigned_technician&&e.jsxs("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:["Tech: ",t.assigned_technician]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${S(t.priority)}`,children:t.priority})}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{href:`/dc-installations/${t.id}`,className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"View Details",children:e.jsx(F,{className:"h-4 w-4"})}),e.jsx(i,{href:`/admin/installations/${t.id}/edit`,className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>$(t),className:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300",title:"Generate Shareable Link",children:e.jsx(H,{className:"h-4 w-4"})}),e.jsx("a",{href:`/admin/installations/${t.id}/download-all`,className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",title:"Download All Files",children:e.jsx(T,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>_(t.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(y,{className:"h-4 w-4"})})]})})]},t.id))})]})}),r.last_page>1&&e.jsx("div",{className:"border-t border-gray-200 bg-white px-4 py-3 sm:px-6 dark:border-gray-700 dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing ",(r.current_page-1)*r.per_page+1," to"," ",Math.min(r.current_page*r.per_page,r.total)," of ",r.total," ","results"]}),e.jsxs("div",{className:"flex space-x-2",children:[r.current_page>1&&e.jsx(i,{href:`/admin/installations?page=${r.current_page-1}&${new URLSearchParams(s).toString()}`,className:"rounded border border-gray-300 px-3 py-1 text-sm hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:"Previous"}),Array.from({length:Math.min(5,r.last_page)},(t,l)=>{const a=r.current_page-2+l;return a>0&&a<=r.last_page?e.jsx(i,{href:`/admin/installations?page=${a}&${new URLSearchParams(s).toString()}`,className:`rounded border px-3 py-1 text-sm ${a===r.current_page?"border-blue-600 bg-blue-600 text-white":"border-gray-300 hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700"}`,children:a},a):null}),r.current_page<r.last_page&&e.jsx(i,{href:`/admin/installations?page=${r.current_page+1}&${new URLSearchParams(s).toString()}`,className:"rounded border border-gray-300 px-3 py-1 text-sm hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:"Next"})]})]})})]}),r.data.length===0&&e.jsxs("div",{className:"rounded-lg bg-white p-8 text-center shadow dark:bg-gray-800",children:[e.jsx(U,{className:"mx-auto mb-4 h-12 w-12 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900 dark:text-white",children:"No installations found"}),e.jsx("p",{className:"mb-4 text-gray-500 dark:text-gray-400",children:Object.values(s).some(Boolean)?"Try adjusting your filters or search terms.":"Get started by creating your first installation record."}),e.jsxs(i,{href:"/admin/installations/create",className:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),"Create Installation"]})]})]})]})}export{se as default};
