import{r as p,K as w,j as e,L as _,$ as f,S as b}from"./app-D8uQYgvl.js";import{P as d,a as C,C as L,A as M,F as S,U as $}from"./users-UtEP8ujb.js";import{c as s}from"./createLucideIcon-Dygev6kt.js";import{S as A,M as I}from"./shield-Q_hQjvIf.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],W=s("Download",D);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],O=s("House",F);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],z=s("LayoutDashboard",U);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],k=s("LogOut",E);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],P=s("Menu",H);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],R=s("X",T);function G({children:j,breadcrumbs:x=[]}){const[m,c]=p.useState(!1),[r,l]=p.useState(!1),{auth:N}=w().props,{user:a}=N,v=(()=>{const t=[{name:"Dashboard",href:"/dashboard",icon:z,current:location.pathname==="/dashboard"}];return a.user_type==="Admin"?[{name:"Admin Dashboard",href:"/admin/dashboard",icon:A,current:location.pathname==="/admin/dashboard"},{name:"Installation Management",href:"/admin/installations",icon:d,current:location.pathname.startsWith("/admin/installations")},{name:"User Management",href:"/admin/users",icon:C,current:location.pathname.startsWith("/admin/users")},{name:"Reports & Analytics",href:"/admin/reports",icon:L,current:location.pathname.startsWith("/admin/reports")||location.pathname.startsWith("/admin/analytics")},{name:"Audit Logs",href:"/admin/audit",icon:M,current:location.pathname.startsWith("/admin/audit")}]:a.user_type==="Client"?[{name:"Client Dashboard",href:"/client/dashboard",icon:I,current:location.pathname==="/client/dashboard"},{name:"Installations",href:"/client/installations",icon:d,current:location.pathname.startsWith("/client/installations")},{name:"Reports",href:"/client/reports",icon:S,current:location.pathname.startsWith("/client/reports")},{name:"Downloads",href:"/client/installations?tab=downloads",icon:W,current:location.pathname.includes("downloads")},{name:"Profile",href:"/client/profile",icon:$,current:location.pathname==="/client/profile"}]:[...t,{name:"Create Installation",href:"/",icon:O,current:location.pathname==="/"}]})(),h=async()=>{if(!r){l(!0);try{await b.post("/logout",{},{onSuccess:()=>{window.location.href="/"},onError:t=>{console.error("Logout error:",t),g()},onFinish:()=>{l(!1)}})}catch(t){console.error("Logout failed:",t),g()}}},g=()=>{var t;try{b.get("/logout",{},{onSuccess:()=>{window.location.href="/"},onError:()=>{window.location.href="/logout"},onFinish:()=>{l(!1)}})}catch{const o=document.createElement("form");o.method="POST",o.action="/logout";const y=(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content");if(y){const i=document.createElement("input");i.type="hidden",i.name="_token",i.value=y,o.appendChild(i)}document.body.appendChild(o),o.submit(),l(!1)}},u=t=>{switch(t){case"Admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"Client":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"User":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}};return e.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(_,{title:"DC Installation Management"}),m&&e.jsx("div",{className:"bg-opacity-75 fixed inset-0 z-40 bg-gray-600 lg:hidden",onClick:()=>c(!1)}),e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-64 transform bg-white shadow-lg transition-transform duration-300 ease-in-out lg:static lg:inset-0 lg:translate-x-0 dark:bg-gray-800 ${m?"translate-x-0":"-translate-x-full"}`,children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsxs("div",{className:"flex h-16 items-center justify-between border-b border-gray-200 px-6 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"ml-3 text-lg font-semibold text-gray-900 dark:text-white",children:"DC Manager"})]}),e.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600 lg:hidden dark:hover:text-gray-300",children:e.jsx(R,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"border-b border-gray-200 px-6 py-4 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-600 dark:bg-blue-500",children:e.jsx("span",{className:"text-sm font-medium text-white",children:a.name.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[e.jsx("p",{className:"truncate text-sm font-medium text-gray-900 dark:text-white",children:a.name}),e.jsx("p",{className:"truncate text-xs text-gray-500 dark:text-gray-400",children:a.email}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${u(a.user_type)}`,children:a.user_type}),a.is_active&&e.jsxs("span",{className:"ml-2 flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-green-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-green-500"})]})]})]})]})}),e.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto px-4 py-4",children:v.map(t=>{const n=t.icon;return e.jsxs(f,{href:t.href,className:`group flex items-center rounded-lg px-3 py-2 text-sm font-medium transition-colors ${t.current?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:[e.jsx(n,{className:`mr-3 h-5 w-5 flex-shrink-0 ${t.current?"text-blue-500 dark:text-blue-400":"text-gray-400 group-hover:text-gray-500 dark:text-gray-500 dark:group-hover:text-gray-400"}`}),t.name]},t.name)})}),e.jsx("div",{className:"border-t border-gray-200 p-4 dark:border-gray-700",children:e.jsx("button",{onClick:h,disabled:r,className:`group flex w-full items-center rounded-lg px-3 py-2 text-sm font-medium transition-colors ${r?"cursor-not-allowed opacity-50":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-3 h-5 w-5 animate-spin rounded-full border-2 border-gray-300 border-t-gray-600"}),"Signing out..."]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-500 dark:text-gray-500 dark:group-hover:text-gray-400"}),"Sign out"]})})})]})}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsx("div",{className:"sticky top-0 z-30 border-b border-gray-200 bg-white px-4 py-3 sm:px-6 lg:px-8 dark:border-gray-700 dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>c(!0),className:"text-gray-500 hover:text-gray-600 lg:hidden dark:text-gray-400 dark:hover:text-gray-300",children:e.jsx(P,{className:"h-6 w-6"})}),x.length>0&&e.jsx("nav",{className:"ml-4 lg:ml-0",children:e.jsx("ol",{className:"flex items-center space-x-2 text-sm",children:x.map((t,n)=>e.jsxs("li",{className:"flex items-center",children:[n>0&&e.jsx("span",{className:"mx-2 text-gray-400 dark:text-gray-500",children:"/"}),t.href?e.jsx(f,{href:t.href,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:t.title}):e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.title})]},n))})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Welcome,"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.name}),e.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${u(a.user_type)}`,children:a.user_type})]}),e.jsx("button",{onClick:h,disabled:r,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50 dark:text-gray-500 dark:hover:text-gray-300",title:"Sign out",children:r?e.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-gray-300 border-t-gray-600"}):e.jsx(k,{className:"h-5 w-5"})})]})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:j})]})]})}export{G as A,W as D,R as X};
